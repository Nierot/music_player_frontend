(this.webpackJsonpmusic_player_frontend=this.webpackJsonpmusic_player_frontend||[]).push([[0],{140:function(e,t,n){e.exports=n(445)},146:function(e,t,n){},168:function(e,t,n){},191:function(e,t){},194:function(e,t,n){},199:function(e,t,n){},425:function(e,t,n){},427:function(e,t,n){},428:function(e,t,n){},429:function(e,t,n){},430:function(e,t,n){},431:function(e,t,n){},433:function(e,t,n){},434:function(e,t,n){},435:function(e,t,n){},436:function(e,t,n){},437:function(e,t,n){},438:function(e,t,n){},439:function(e,t,n){},440:function(e,t,n){},441:function(e,t,n){},442:function(e,t,n){},443:function(e,t,n){},445:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(132),s=n.n(i),o=n(3),c=n(4),l=n(5),u=n(6),m=(n(145),n(146),n(42)),d=n(13),p=n(9),h=n.n(p),v=n(19),f=n(7),y=n(133),b=n.n(y),g="https://api.nierot.com/music/",E="https://cdn.nierot.com/music/",k="https://api.nierot.com/spotify/auth/refresh";function w(e){var t=e%60;t<10&&(t="0"+t);var n=Math.floor(e/60);return isNaN(n)||isNaN(t)?"0:00":"".concat(n,":").concat(t)}function S(e){return new URLSearchParams(window.location.search).get(e)}function O(e){return N.apply(this,arguments)}function N(){return(N=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(v.a)(h.a.mark((function e(n,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:t})}).then((function(e){return e.json()})).then((function(e){e.error?(console.log("Spotify refresh invalid",e),a(e),localStorage.removeItem("spotifyAccess")):(e.dateSet=new Date,n(e.access_token),localStorage.setItem("spotifyAccess",JSON.stringify(e)))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return e.reduce((function(e,t,n,a){return n%2===0&&e.push(a.slice(n,n+2)),e}),[])}function C(e){return e[(t=0,n=e.length-1,Math.floor(Math.random()*(n+1))+t)];var t,n}var P=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).SPOTIFY_API="https://api.spotify.com/v1",a.state={},a.spotifyApi=new b.a,a.spotifyApi.setAccessToken(a.getAccessToken()),a.getAccessToken=a.getAccessToken.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"getAccessToken",value:function(){return JSON.parse(localStorage.getItem("spotifyAccess")).access_token}},{key:"getDeviceID",value:function(){return window.spotifyPlayer._options.id}},{key:"playSong",value:function(e){this.spotifyApi.play({device_id:this.getDeviceID(),uris:[e]})}},{key:"endOfSong",value:function(){window.playerEvents.emit("finished")}},{key:"componentDidMount",value:function(){var e=this;window.onSpotifyWebPlaybackSDKReady=function(){var t=window.Spotify,n=new t.Player({name:"Epic Web Player",getOAuthToken:function(){var e=Object(v.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("spotifyRefreshToken"),e.next=3,O(n).then((function(e){t(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});window.spotifyPlayer=n,window.playerEvents.emit("spotifyReady",t),window.playerEvents.on("play",(function(t){"spotify"===t.type?e.playSong(t.typeId):n.pause()})),window.playerEvents.on("stop",(function(){n.pause()})),n.addListener("initialization_error",(function(e){var t=e.message;console.error(t)})),n.addListener("authentication_error",(function(e){var t=e.message;console.error(t)})),n.addListener("account_error",(function(e){var t=e.message;console.error(t)})),n.addListener("playback_error",(function(e){var t=e.message;console.error(t)})),n.addListener("player_state_changed",(function(t){t&&(e.state&&t.track_window.previous_tracks.find((function(e){return e.id===t.track_window.current_track.id}))&&!e.state.paused&&t.paused&&e.endOfSong(),e.setState(t))})),n.addListener("ready",(function(e){var t=e.device_id;console.log("Device ready!",t)})),n.addListener("not_ready",(function(e){var t=e.device_id;console.log("Device ID has gone offline",t)})),window.playerEvents.on("controllerPause",(function(e){n.togglePlay().then((function(){return console.log("togglePlay")}))})),window.playerEvents.on("controllerSkip",(function(e){"spotify"!==!e.type&&n.nextTrack().then((function(){return console.log("nextTrack")}))})),n.connect()}}},{key:"render",value:function(){return r.a.createElement("div",{className:"SpotifyWebPlayback"})}}]),n}(r.a.Component),T=(n(168),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={timeString:"0:00",time:0},a.interval=void 0,a}return Object(c.a)(n,[{key:"initiateInterval",value:function(){var e=this,t=this.props,n=t.length;t.playing?void 0===this.interval&&(this.interval=setInterval((function(){n!==e.state.time&&(e.setState({time:e.state.time+1}),e.generateTimeString())}),1e3)):this.interval=null}},{key:"componentDidUpdate",value:function(){this.initiateInterval()}},{key:"componentDidMount",value:function(){this.initiateInterval()}},{key:"generateTimeString",value:function(){this.setState({timeString:w(this.state.time)})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),this.interval=void 0}},{key:"render",value:function(){return r.a.createElement("div",{className:"Timer"},this.state.timeString)}}]),n}(r.a.Component)),A=n(134),x=n.n(A),I=(n(194),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={file:void 0,playing:!1},a.player=r.a.createRef(),a}return Object(c.a)(n,[{key:"playSong",value:function(e){this.player.current.src=E+e+".mp3",this.player.current.play()}},{key:"componentDidMount",value:function(){var e=this;window.playerEvents.on("controllerPause",(function(){e.state.playing?(e.player.current.pause(),e.setState({playing:!1})):(e.player.current.play(),e.setState({playing:!0}))})),window.playerEvents.on("play",(function(t){"mp3"===t.type||"youtube"===t.type?(e.playSong(t.typeId),e.setState({playing:!0})):e.player.current.pause()})),window.playerEvents.on("stop",(function(){e.player.current.pause()})),this.player.current.addEventListener("ended",(function(){e.player.current.currentTime=0,window.playerEvents.emit("finished")}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"MP3Player"},r.a.createElement("audio",{ref:this.player}))}}]),n}(r.a.Component)),D=n(17),L=n(18),_=n(32),M=(n(199),n(135)),R=n.n(M),B=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"Particles"},r.a.createElement(R.a,{height:window.outerHeight,params:{particles:{number:{value:this.props.particles||20},line_linked:{enable:!1},move:{speed:this.props.speed||10,out_mode:"out"},shape:{type:["image"],image:this.props.image||[{src:"https://cdn.nierot.com/memes/beugel.svg",height:40,width:20},{src:"https://cdn.nierot.com/memes/klok.svg",height:50,width:30},{src:"https://cdn.nierot.com/memes/hertog-jan.svg",height:30,width:25}]},size:{value:this.props.size||50,random:!1,anim:{enable:!1,speed:4,size_min:40,sync:!0}},opacity:{anim:{enable:!1},value:this.props.opacity||.7},retina_detect:!0}}}))}}]),n}(r.a.Component),F=(n(425),n(136)),U=n.n(F),W=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={decided:!1},a.adtRadWheel={},a.drawPointer=a.drawPointer.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"generateSegments",value:function(){var e=this,t=["#22aa22","#ff2222","#2222aa"],n=-1;return this.props.people.map((function(a){2===n?n=0:n++;var r=t[n];return e.generateSegment(a,r)}))}},{key:"generateSegment",value:function(e,t){return{fillStyle:t,text:e}}},{key:"componentDidMount",value:function(){var e=this;window.eventEvents||(window.eventEvents=new _.EventEmitter),window.playerEvents.emit("play",{type:"spotify",artist:"Rene Karst",title:"Atje voor de sfeer",typeId:"spotify:track:1YxLxQ8QCGsrtSLuQzpSUz"}),setTimeout((function(){return e.adtRadWheel.startAnimation()}),1e4),this.props.people&&(window.drawPointer=this.drawPointer,this.adtRadWheel=new U.a({canvasId:"adtRadCanvas",numSegments:this.props.people.length,segments:this.generateSegments(),rotationAngle:3,pointerAngle:40,animation:{type:"spinToStop",duration:5,spins:8,clearTheCanvas:!1,callbackFinished:"window.drawPointer()"}}),this.drawPointer())}},{key:"drawPointer",value:function(){var e=this,t=new Image;t.onload=function(){var n=document.querySelector("#adtRadCanvas").getContext("2d");n&&(n.save(),n.translate(700,138),n.rotate(e.adtRadWheel.degToRad(220)),n.drawImage(t,0,0,120,120),n.restore())},t.src="https://cdn.nierot.com/memes/beugel.png"}},{key:"componentWillUnmount",value:function(){window.drawPointer=null}},{key:"render",value:function(){return r.a.createElement("div",{className:"AdtRadEvent"},r.a.createElement("div",{className:"adtRad"},r.a.createElement("canvas",{id:"adtRadCanvas",width:"800",height:"800"})),r.a.createElement(B,null))}}]),n}(r.a.Component),J=(n(427),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).SONGS_CALLED_SHOTS=["spotify:track:0FQA22KGLQdDesHAJtrEEE","spotify:track:1V4jC0vJ5525lEF1bFgPX2"],e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){window.playerEvents.emit("play",{type:"spotify",typeId:this.getRandomSongCalledShots()})}},{key:"getRandomSongCalledShots",value:function(){return this.SONGS_CALLED_SHOTS[Math.floor(Math.random()*this.SONGS_CALLED_SHOTS.length)]}},{key:"render",value:function(){return r.a.createElement("div",{className:"ShotsEvent"},r.a.createElement(B,{image:[{src:"https://cdn.nierot.com/memes/shot.svg",height:10,width:10},{src:"https://cdn.nierot.com/memes/shot2.svg",height:10,width:10},{src:"https://cdn.nierot.com/memes/shot3.svg",height:10,width:10}],speed:6,particles:30,size:30,opacity:.6}),r.a.createElement("div",{className:"shotsForeground"},r.a.createElement("img",{src:"https://cdn.nierot.com/memes/shots_stupid_image.png",alt:"shots"})))}}]),n}(r.a.Component)),Y=(n(428),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).ESCALATIE_SONGS=["spotify:track:0yrbQBBDM453xkKItntXnb","spotify:track:72lQhFytmSrEVWBiYUWkcR"],e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){window.playerEvents.emit("play",{type:"spotify",typeId:C(this.ESCALATIE_SONGS)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"EscalatieEvent"},r.a.createElement(B,{image:[{src:"https://cdn.nierot.com/memes/barf.svg",height:25,width:25},{src:"https://cdn.nierot.com/memes/stroh.svg",height:50,width:50}],size:50,speed:20}),r.a.createElement("div",{className:"escalatie"},r.a.createElement("img",{src:"https://cdn.nierot.com/memes/escalatie.jpg",alt:"escalatie"})))}}]),n}(r.a.Component)),z=(n(429),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){window.playerEvents.emit("play",{type:"spotify",typeId:"spotify:track:5pmL3RzOy3IvGFaSDi4hZL"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"WaterEvent"},r.a.createElement(B,{image:[{src:"https://cdn.nierot.com/memes/water3.svg",heigth:20,width:20}],particles:20,size:40,speed:10,opacity:.6}),r.a.createElement("div",{className:"waterForeground"},r.a.createElement("img",{src:"https://cdn.nierot.com/memes/brak_ha-ha.png",alt:"ha-ha wat grappig"})))}}]),n}(r.a.Component)),q=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).CLIENT_ID="5bf6a2aacb4d46e9bebec0f9453a7781",a.redirectToSpotify=a.redirectToSpotify.bind(Object(f.a)(a)),a.getAccessTokens=a.getAccessTokens.bind(Object(f.a)(a)),a.tokenChecker=a.tokenChecker.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"generateAuthUrl",value:function(){return"https://accounts.spotify.com/authorize"+"?client_id=".concat(this.CLIENT_ID)+"&response_type=code"+"&redirect_uri=".concat("https://music.nierot.com/")+"&scope=user-read-private%20streaming%20user-read-email"}},{key:"redirectToSpotify",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.replace(this.generateAuthUrl());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exchangeCodeForAccessToken",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://api.nierot.com/spotify/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:S("code"),redirect_uri:"https://music.nierot.com/"})}).then((function(e){return e.json()})).then((function(e){e.dateSet=new Date,localStorage.setItem("spotifyRefreshToken",e.refresh_token),localStorage.setItem("spotifyAccess",JSON.stringify(e))})).catch(console.error);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccessTokens",value:function(){return JSON.parse(localStorage.getItem("spotifyAccess"))}},{key:"getRefreshToken",value:function(){return localStorage.getItem("spotifyRefreshToken")}},{key:"componentDidMount",value:function(){if(S("code")&&(this.exchangeCodeForAccessToken(),window.history.replaceState({},null,window.location.href.split("?")[0])),null!=localStorage.getItem("spotifyAccess")){var e=this.getAccessTokens(),t=this.getRefreshToken();void 0===e.access_token||void 0===t?(console.log("token invalid, purging"),localStorage.removeItem("spotifyAccess")):new Date(e.dateSet).getTime()+36e5<=(new Date).getTime()?(console.log("Spotify tokens expired, purging"),localStorage.removeItem("spotifyAccess")):window.spotifyTokenInterval=setInterval(this.tokenChecker,6e4)}}},{key:"tokenChecker",value:function(){if(this.getAccessTokens()){var e=this.getAccessTokens().dateSet,t=this.getRefreshToken();new Date(e).getTime()+12e5<=(new Date).getTime()&&O(t)}}},{key:"render",value:function(){return r.a.createElement("div",{className:"SpotifyAuthentication ".concat(this.props.className)},r.a.createElement("button",{className:"button is-info",onClick:this.redirectToSpotify},"Login with Spotify"))}}]),n}(r.a.Component),V=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={playing:!1},window.socket||(window.socket=x()("https://api.nierot.com/",{reconnectionDelay:1e3,reconnection:!0,reconnectionAttemps:10,transports:["websocket"],agent:!1,upgrade:!0,path:"/music/socket.io",rejectUnauthorized:!1})),a.startPlaying=a.startPlaying.bind(Object(f.a)(a)),a.getNextSong=a.getNextSong.bind(Object(f.a)(a)),a.songFinished=a.songFinished.bind(Object(f.a)(a)),a.playerEvents=r.a.createRef(),a.coverArt=r.a.createRef(),window.eventEvents||(window.eventEvents=new _.EventEmitter),S("eventTypes")&&(a.EVENTS=S("eventTypes").split(","),0===a.EVENTS.length&&(a.EVENTS=["shots","adtrad","Escalatie","water"])),a}return Object(c.a)(n,[{key:"generateQueue",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(g,"queue/generate?p=").concat(S("p"),"&events=").concat(S("events"),"&listOfPeople=").concat(S("listOfPeople"),"&songsBetweenEvents=").concat(S("songsBetweenEvents")));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"startPlaying",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getNextSong().then((function(){t.setState({playing:!0}),window.playerEvents.emit("play",t.state.currentSong)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getNextSong",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){fetch("".concat(g,"queue/next?p=").concat(S("p"))).then((function(e){return e.json()})).then((function(e){return t.setState({songID:e.next.songID,addedBy:e.next.user})})).then((function(){return t.getSongInformation().then(e).catch(n)})).catch(console.error)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSongInformation",value:function(){var e=this;return new Promise((function(t,n){fetch("".concat(g,"song?song=").concat(e.state.songID)).then((function(e){return e.json()})).then((function(t){if(t.song)return"event"===t.type&&(t.song={}),t;console.error("For some reason this songId is nonsense, playing next song",t),e.songFinished()})).then((function(t){return e.setState({currentSong:t.song,playing:!0,event:""})})).then(t).catch(n)}))}},{key:"songFinished",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNextSong().then((function(){"event"!==t.state.currentSong.type?window.playerEvents.emit("play",t.state.currentSong):(window.playerEvents.emit("stop"),t.setState({event:t.EVENTS[Math.floor(Math.random()*t.EVENTS.length)]}))}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.socket.on("pause",(function(){return window.playerEvents.emit("controllerPause")})),window.socket.on("skip",(function(){t.getNextSong().then((function(){"event"!==t.state.currentSong.type?window.playerEvents.emit("play",t.state.currentSong):(window.playerEvents.emit("stop"),t.setState({event:t.EVENTS[Math.floor(Math.random()*t.EVENTS.length)]}))}))})),window.socket.on("previous",(function(){return window.playerEvents.emit("controllerPrevious")})),window.socket.on("code",(function(e){return t.setState({playerCode:e})})),window.socket.on("whatAreYouPlaying",(function(e,n){t.state.currentSong&&"event"===t.state.currentSong.type?n({title:t.state.event,artist:"Event"}):n(t.state.currentSong)})),window.playerEvents.on("finished",this.songFinished),e.next=8,this.generateQueue();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderEventField",value:function(){if(!this.state.currentSong||"event"!==this.state.currentSong.type)return this.playerEvents.current&&!this.playerEvents.current.classList.contains("hidden")&&this.playerEvents.current.classList.add("hidden"),this.coverArt.current&&this.coverArt.current.classList.remove("hidden"),null;switch(this.playerEvents.current.classList.remove("hidden"),this.state.event){case"adtrad":return this.coverArt.current.classList.add("hidden"),r.a.createElement(W,{people:S("listOfPeople").split(",")});case"monsteralarm":return r.a.createElement("h1",null,"Monster alarm");case"cocktails":return r.a.createElement("h1",null,"cocktails");case"shots":return r.a.createElement(J,null);case"Escalatie":return r.a.createElement(Y,null);case"water":return r.a.createElement(z,null);default:return null}}},{key:"render",value:function(){var e;e=this.state.currentSong&&this.state.currentSong.coverArt?this.state.currentSong.coverArt:"https://cdn.nierot.com/memes/missing.jpg";var t="Song",n=0,a="Artist",i="none",s="0:00";if(this.state.currentSong){if(t=this.state.currentSong.title,s=w(n=Math.round(this.state.currentSong.length/1e3)),isNaN(n))switch(this.state.event){case"adtrad":s="3:18";break;case"shots":s="3:52";break;case"Escalatie":s="3:24";break;case"water":s="4:05"}a=this.state.currentSong.artist,i=this.state.currentSong.songId}return r.a.createElement("div",{className:"Player"},this.state.playing?null:r.a.createElement("div",{className:"playButton"},r.a.createElement("button",{onClick:this.startPlaying},r.a.createElement(D.a,{icon:L.e,size:"6x",color:"#ff0038"}))),r.a.createElement("div",{className:"playerContainer"},r.a.createElement("h3",{id:"playerCode"},this.state.playerCode),r.a.createElement("h1",{className:"bold",id:"songTitle"},t),r.a.createElement("h3",{id:"addedBy"},"Added by: ",this.state.addedBy||"unknown"),r.a.createElement("h2",{className:"bold",id:"artist"},a),r.a.createElement("h2",{id:"timer"},r.a.createElement(T,{key:i,songId:i,length:n,playing:this.state.playing})),r.a.createElement("img",{id:"coverArt",src:e,ref:this.coverArt,alt:"cover art"}),r.a.createElement("h2",{id:"songLength"},s)),r.a.createElement("div",{className:"playbackHelpers"},r.a.createElement(P,null),r.a.createElement(I,null)),r.a.createElement("div",{className:"playerEvents hidden",ref:this.playerEvents},this.renderEventField()),r.a.createElement("div",{className:"spotifyAuthenticationHelper"},r.a.createElement(q,null)))}}]),n}(r.a.Component),G=(n(430),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"PlaylistCreator"},r.a.createElement("div",{className:"Link",id:"title"},r.a.createElement("h1",null,"Playlist editor")),r.a.createElement("div",{className:"Link",id:"new"},r.a.createElement("a",{className:"button is-info",href:"/playlist/new"},"Create new playlist")),r.a.createElement("div",{className:"Link",id:"all"},r.a.createElement("a",{className:"button is-info",href:"/playlist/all"},"Play/edit playlists")),r.a.createElement("div",{className:"Link",id:"my"},r.a.createElement("a",{className:"button is-info",href:"/playlist"},"My playlists")))}}]),n}(r.a.Component)),Q=(n(431),n(34)),H=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.validate=a.validate.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"handleSubmit",value:function(e,t){var n=t.props,a=(void 0===n&&this.props,t.setSubmitting);fetch("".concat(g,"playlist"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,type:"public",user:e.username,settings:{duplicates:e.duplicates}})}).then((function(e){201===e.status?window.location.replace("/playlist"):(alert("Adding playlist failed, reloading..."),window.location.reload())})),a(!1)}},{key:"validate",value:function(e){var t={};return e.name&&""!==e.name||(t.name="Name required"),e.username&&""!==e.username||(t.username="Username required"),t}},{key:"render",value:function(){return r.a.createElement("div",{className:"CreateNewPlaylist"},r.a.createElement("h2",null,"Create a new playlist"),r.a.createElement(Q.d,{initialValues:{name:"",username:"",duplicates:!0},validate:this.validate,onSubmit:this.handleSubmit},(function(e){return r.a.createElement(Q.c,null,r.a.createElement(Q.b,{type:"text",name:"name",className:"input is-info",placeholder:"Playlist Name"}),r.a.createElement("div",{className:"errorContainer",id:"errorName"},r.a.createElement(Q.a,{name:"name",render:function(e){return r.a.createElement("div",{className:"error"},e)}})),r.a.createElement(Q.b,{type:"text",name:"username",className:"input is-info",placeholder:"Username"}),r.a.createElement("div",{className:"errorContainer",id:"errorUsername"},r.a.createElement(Q.a,{name:"username",render:function(e){return r.a.createElement("div",{className:"error"},e)}})),r.a.createElement("div",{id:"duplicates"},"Duplicates allowed? \xa0",r.a.createElement(Q.b,{type:"checkbox",name:"duplicates",className:"checkbox"})),r.a.createElement("button",{type:"submit",disabled:e.isSubmitting},"Submit"))})))}}]),n}(r.a.Component),K=(n(433),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).submitPlayerCode=a.submitPlayerCode.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"checkCode",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g+"controller/check",{method:"POST",body:JSON.stringify({playerCode:t}),headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitPlayerCode",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("#playerCodeInput").value,e.next=3,this.checkCode(t);case 3:if(n=e.sent,t&&4===t.length){e.next=8;break}return e.abrupt("return");case 8:400===n.status?alert("Player does not exist"):window.controllerEvents.emit("playerCodeSubmitted",t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"AskForPlayerCode"},r.a.createElement("h2",null,"Enter the code given in the top left of the player:"),r.a.createElement("input",{className:"input is-info",id:"playerCodeInput",type:"text",placeholder:"Player Code",onInput:this.submitPlayerCode}))}}]),n}(r.a.Component)),X=(n(434),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={currentSong:{}},a.pause=a.pause.bind(Object(f.a)(a)),a.skip=a.skip.bind(Object(f.a)(a)),a.reqObj=a.reqObj.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"reqObj",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"POST";return{method:e,body:JSON.stringify({playerCode:this.props.playerCode}),headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}}},{key:"componentDidMount",value:function(){this.getCurrentSongInformation()}},{key:"pause",value:function(){var e=this;setTimeout((function(){return e.getCurrentSongInformation()}),2e3),fetch(g+"controller/pause",this.reqObj())}},{key:"skip",value:function(){var e=this;setTimeout((function(){return e.getCurrentSongInformation()}),2e3),fetch(g+"controller/skip",this.reqObj())}},{key:"getCurrentSongInformation",value:function(){var e=this;fetch(g+"controller/playing",this.reqObj()).then((function(e){return e.json()})).then((function(t){return e.setState({currentSong:t.data||{}})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"ControlPanel"},r.a.createElement("div",{id:"img"},r.a.createElement("img",{src:this.state.currentSong.coverArt||"https://cdn.nierot.com/memes/missing.jpg",alt:"Album Cover"})),r.a.createElement("div",{id:"title"},r.a.createElement("h2",null,this.state.currentSong.title||"Title"),r.a.createElement("h3",null,this.state.currentSong.artist||"Artist")),r.a.createElement("div",{id:"buttonPanel"},r.a.createElement("button",{className:"button",id:"pause",onClick:this.pause},r.a.createElement(D.a,{icon:L.d,size:"3x"})),r.a.createElement("button",{className:"button",id:"skip",onClick:this.skip},r.a.createElement(D.a,{icon:L.c,size:"3x"}))))}}]),n}(r.a.Component)),Z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={code:void 0},window.controllerEvents=new _.EventEmitter,e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;S("code")&&this.setState({code:S("code")}),window.controllerEvents.on("playerCodeSubmitted",(function(t){e.setState({code:t});var n=new URLSearchParams;n.append("code",t),window.location.href=window.location.href+"?"+n}))}},{key:"refresh",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"Controller"},this.state.code?r.a.createElement(X,{playerCode:this.state.code}):r.a.createElement(K,null))}}]),n}(r.a.Component),$=(n(435),n(33)),ee=n.n($);n(436);function te(){return r.a.createElement("div",{className:"LoadingScreen"},r.a.createElement("h1",{className:"bold"},"Loading"),r.a.createElement(D.a,{icon:L.g,size:"3x",spin:!0,color:"black"}))}var ne=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={loading:!0,playlist:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.checkPlaylist(),ee()("#nameWarning").css("visibility","hidden")}},{key:"checkPlaylist",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"playlist/exists"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playlistID:S("p")})}).then((function(e){return e.json()})).then((function(e){return t.setState({playlist:!!e.exists,loading:!1})})).catch(console.error);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"relocate",value:function(e){window.location.replace("/playlist/edit/".concat(e,"?p=").concat(S("p"),"&n=").concat(S("n")))}},{key:"addSpotify",value:function(){this.relocate("spotify")}},{key:"addYouTube",value:function(){this.relocate("youtube")}},{key:"addMP3",value:function(){this.relocate("mp3")}},{key:"noPlaylist",value:function(){return r.a.createElement("div",{className:"noPlaylist"},this.state.loading?r.a.createElement(te,null):r.a.createElement("h1",null,"Playlist not found"))}},{key:"checkNameInput",value:function(){var e=ee()("#nameInput"),t=ee()("#nameWarning");console.log("oof"),""===e.val()?(e.addClass("is-danger"),t.css("visibility","visible")):(e.removeClass("is-danger"),t.css("visibility","hidden"))}},{key:"addName",value:function(){this.checkNameInput();var e=ee()("#nameInput").val(),t=new URLSearchParams(window.location.search);t.set("n",e),window.location.search=t}},{key:"shareLink",value:function(){var e=new URLSearchParams(window.location.search);return e.delete("n"),window.location.href.split("?")[0]+"?"+e}},{key:"copyLink",value:function(){var e=document.querySelector("#shareLinkInput");e.select(),e.setSelectionRange(0,99999),document.execCommand("copy")}},{key:"noName",value:function(){var e=this;return r.a.createElement("div",{className:"noName"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("h1",{className:"title"},"What is your name?")),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("small",{id:"nameWarning"},"Please fill in a name")),r.a.createElement("br",null),r.a.createElement("div",{className:"columns is-mobile"},r.a.createElement("div",{className:"column is-1"}),r.a.createElement("input",{className:"input column",id:"nameInput",type:"text",onChange:function(){return e.checkNameInput()}}),r.a.createElement("div",{className:"column is-1"})),r.a.createElement("center",null,r.a.createElement("br",null),r.a.createElement("button",{className:"button",onClick:function(){return e.addName()}},r.a.createElement(D.a,{icon:L.b}))))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"EditPlaylist"},null===S("n")?this.noName():this.state.playlist?r.a.createElement("div",{className:"editor"},r.a.createElement("h1",{className:"center"},"Add a song?"),r.a.createElement("br",null),r.a.createElement("div",{className:"buttonColumn"},r.a.createElement("div",{className:"buttonContainer"},r.a.createElement("button",{className:"button is-link is-large",onClick:function(){return e.addSpotify()}},"Spotify")),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement("button",{className:"button is-link is-large",onClick:function(){return e.addYouTube()}},"YouTube")),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement("button",{className:"button is-link is-large",onClick:function(){return e.addMP3()}},"MP3")),r.a.createElement("div",{className:"buttonContainer sharePlaylist"},r.a.createElement("h3",null,"Let others add to this playlist:"),r.a.createElement("div",null),r.a.createElement("input",{type:"text",className:"input",id:"shareLinkInput",defaultValue:this.shareLink()}),r.a.createElement("button",{className:"button is-primary",onClick:function(){return e.copyLink()}},"Copy")))):this.noPlaylist())}}]),n}(r.a.Component);function ae(){window.location.href="/playlist/edit?p=".concat(S("p"),"&n=").concat(S("n"))}function re(){return r.a.createElement("button",{className:"button backButton",onClick:ae},r.a.createElement(D.a,{icon:L.a}))}function ie(e,t,n,a){var r;r="spotify"===a?e.id:e.typeData.id,fetch("".concat(g,"song"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e.title,artist:e.artist,type:a,length:e.length,coverArt:e.coverArt,typeData:{id:r}})}).then((function(e){return e.text()})).then((function(e){return function(e,t,n){fetch("".concat(g,"playlist/song"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playlistID:t,songID:e,user:n})}).then((function(){return window.location.reload()})).catch(console.error)}(e,t,n)}))}n(437);var se=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={input:"",preview:!1,videoPreview:{}},a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.removePreview=a.removePreview.bind(Object(f.a)(a)),a.input=r.a.createRef(),a}return Object(c.a)(n,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.value;t.includes("youtube.com")?t=t.split("?v=")[1].split("&")[0]:t.includes("youtu.be")&&(t=t.split("youtu.be/")[1].split("?")[0]),this.setState({input:t})}},{key:"handleSubmit",value:function(e){this.getVideoInformation(),e.preventDefault()}},{key:"removePreview",value:function(){this.input.current.value="",this.setState({preview:!1,videoPreview:{}})}},{key:"getVideoInformation",value:function(){var e=this;fetch("https://api.nierot.com/youtube/info?id="+this.state.input).then((function(e){return e.json()})).then((function(t){return e.setState({videoPreview:t,preview:!0})})).catch((function(){e.input.current.value="",alert("That YouTube video does not exist")}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"AddYoutube"},r.a.createElement(re,null),r.a.createElement("h3",{className:"center"},"Add YouTube"),r.a.createElement("div",{className:"previewContainer"},this.state.preview?r.a.createElement(oe,{video:this.state.videoPreview,remove:this.removePreview}):r.a.createElement("div",{className:"noPreview content"},"WARNING: This is quite unstable and probably will not work ",r.a.createElement("br",null),"Try using ",r.a.createElement("a",{href:"https://ytmp3.cc/"},"ytmp3.cc")," and uploading as a mp3 ",r.a.createElement("br",null),"Fill in a YouTube ID/link below. ",r.a.createElement("br",null),"Examples: ",r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",null,"dQw4w9WgXcQ"),r.a.createElement("li",null,"https://youtu.be/M6XaSETNumM"),r.a.createElement("li",null,"https://www.youtube.com/watch?v=75Mw8r5gW8E")))),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{className:"input is-info",type:"text",value:this.state.value,placeholder:"YouTube ID",onChange:this.handleChange,ref:this.input}),r.a.createElement("p",{className:"hidden"},"spacing"),r.a.createElement("input",{className:"button is-info",type:"submit",value:"Check"})))}}]),n}(r.a.Component),oe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleAddThis=a.handleAddThis.bind(Object(f.a)(a)),a.handleDoNotAddThis=a.handleDoNotAddThis.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"handleDoNotAddThis",value:function(){this.props.remove()}},{key:"handleAddThis",value:function(){var e=this.props.video.duration,t=6048e5*e.weeks+864e5*e.days+36e5*e.hours+6e4*e.minutes+1e3*e.seconds;ie({title:this.props.video.title,artist:this.props.video.channel.title,length:t,coverArt:this.props.video.thumbnails.maxres.url||"https://cdn.nierot.com/memes/missing.jpg",typeData:{id:this.props.video.id}},S("p"),S("n"),"youtube")}},{key:"render",value:function(){console.log(this.props.video);var e=this.props.video.thumbnails.maxres;return e=e?e.url:"https://cdn.nierot.com/memes/missing.jpg",r.a.createElement("div",{className:"YoutubePreview"},r.a.createElement("p",null,this.props.video.title),r.a.createElement("img",{src:e,alt:"thumbnail"}),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement("button",{className:"button is-success",onClick:this.handleAddThis},"Add this song?"),"\xa0 \xa0",r.a.createElement("button",{className:"button is-warning",onClick:this.handleDoNotAddThis},"Do not add this")))}}]),n}(r.a.Component),ce=(n(438),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={results:[]},a}return Object(c.a)(n,[{key:"onInput",value:function(e){var t=this,n=e.target.value;""!==n&&fetch("".concat("https://api.nierot.com/search/","?query=").concat(n)).then((function(e){return e.json()})).then((function(e){return t.parseResults(e.body.tracks.items)}))}},{key:"parseResults",value:function(e){var t=[];e.forEach((function(e){return t.push(r.a.createElement(ue,{title:e.name,artist:e.artists.map((function(e){return e.name})).join(", "),cover:e.album.images[1].url,key:e.uri,id:e.uri,length:e.duration_ms,coverArt:e.album.images[0].url}))})),this.setState({results:j(t)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"AddSpotify"},r.a.createElement(re,null),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("h2",null,"Add a Spotify song")),r.a.createElement("div",{className:"columns is-mobile"},r.a.createElement("div",{className:"column is-1"}),r.a.createElement("div",{className:"column is-10"},r.a.createElement("input",{className:"input spotifyInput",type:"text",placeholder:"Search Spotify",onInput:function(t){return e.onInput(t)}})),r.a.createElement("div",{className:"column is-1"})),r.a.createElement(le,{results:this.state.results}))}}]),n}(r.a.Component)),le=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={pages:[],currentPage:0},a.pages=[],a.list=[],a}return Object(c.a)(n,[{key:"invis",value:function(e){ee()(e).css("visibility"," hidden")}},{key:"vis",value:function(e){ee()(e).css("visibility","visible")}},{key:"checkButtons",value:function(){0===this.state.currentPage?(this.vis(".nextButton"),this.invis(".previousButton")):9===this.state.currentPage?(this.invis(".nextButton"),this.vis(".previousButton")):(this.vis(".nextButton"),this.vis(".previousButton"))}},{key:"componentDidMount",value:function(){this.checkButtons()}},{key:"componentDidUpdate",value:function(e){this.checkButtons(),e!==this.props&&this.setState({currentPage:0})}},{key:"nextPage",value:function(){8===this.state.currentPage?this.invis(".nextButton"):this.vis(".nextButton");var e=this.state.currentPage+1;this.setState({currentPage:e})}},{key:"previousPage",value:function(){1===this.state.currentPage?this.invis(".previousButton"):this.vis(".previousButton");var e=this.state.currentPage-1;this.setState({currentPage:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ResultList"},this.props.results[this.state.currentPage],r.a.createElement("div",{className:"pageControls"},r.a.createElement("button",{className:"previousButton button",onClick:function(){return e.previousPage()}},r.a.createElement(D.a,{icon:L.a})),"\xa0\xa0\xa0",r.a.createElement("p",null,this.state.currentPage),"\xa0\xa0\xa0",r.a.createElement("button",{className:"nextButton button",onClick:function(){return e.nextPage()}},r.a.createElement(D.a,{icon:L.b}))))}}]),n}(r.a.Component),ue=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Result box","data-id":this.props.id},r.a.createElement("article",{className:"media"},r.a.createElement("div",{className:"media-left"},r.a.createElement("figure",{className:"image is-96x96"},r.a.createElement("img",{src:this.props.cover,alt:"Cover"}))),r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("strong",null,this.props.title),r.a.createElement("br",null),this.props.artist)),r.a.createElement("div",{className:"media-right"},r.a.createElement("button",{className:"button","data-id":this.props.id,onClick:function(){return ie(e.props,S("p"),S("n"),"spotify")}},r.a.createElement(D.a,{icon:L.f})))))}}]),n}(r.a.Component),me=(n(439),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={selectedFile:null},a.onFileChange=a.onFileChange.bind(Object(f.a)(a)),a.onFileUpload=a.onFileUpload.bind(Object(f.a)(a)),a.onUserStupid=a.onUserStupid.bind(Object(f.a)(a)),a.addSong=a.addSong.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"onFileChange",value:function(e){this.setState({selectedFile:e.target.files[0]})}},{key:"onFileUpload",value:function(){var e=new FormData;e.append("file",this.state.selectedFile),fetch("".concat(E),{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){return e.id})).then(this.addSong).catch(console.error)}},{key:"addSong",value:function(e){ie({title:this.state.selectedFile.name,artist:"mp3",length:-1,coverArt:"https://cdn.nierot.com/memes/missing.jpg",typeData:{id:e}},S("p"),S("n"),"mp3")}},{key:"onUserStupid",value:function(){this.setState({selectedFile:null})}},{key:"uploadBox",value:function(){return this.state.selectedFile?r.a.createElement("div",{className:"upload center"},"You want to upload: ",this.state.selectedFile.name,r.a.createElement("br",null),r.a.createElement("br",null),"Correct?",r.a.createElement("div",{className:"buttonBox"},r.a.createElement("button",{className:"button is-success",onClick:this.onFileUpload},"Yes"),r.a.createElement("button",{className:"button is-danger",onClick:this.onUserStupid},"No"))):r.a.createElement("div",{className:"upload center"},r.a.createElement("input",{className:"input is-info",id:"mp3FileUpload",type:"file",ref:this.fileInput,onChange:this.onFileChange}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"AddMP3"},r.a.createElement(re,null),r.a.createElement("div",{className:"headerText center"},r.a.createElement("h1",null,"Add MP3"),r.a.createElement("p",null,"Select below the MP3 file you want to add to the playlist."),r.a.createElement("p",null,"Proceed with caution, the files you upload are not stored securly."),r.a.createElement("p",null,"You also are responsible for any copyright issues that might crop up from the works you upload.")),this.uploadBox())}}]),n}(r.a.Component)),de=(n(440),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={lists:[]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.setState({lists:this.props.lists.sort((function(e,t){return new Date(t.lastUpdated)-new Date(e.lastUpdated)}))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"PlaylistView"},this.state.lists.map((function(e){return r.a.createElement(pe,{key:e._id,id:e._id,name:e.name,user:e.user,lastUpdated:e.lastUpdated})})))}}]),n}(r.a.Component)),pe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={songs:[]},a}return Object(c.a)(n,[{key:"play",value:function(){window.location.replace("/playlist/play?p=".concat(this.props.id))}},{key:"edit",value:function(){window.location.replace("/playlist/edit?p=".concat(this.props.id))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"PlaylistItem"},r.a.createElement("div",{className:"box"},r.a.createElement("article",null,r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"playlistTitle"},r.a.createElement("span",null,this.props.name),r.a.createElement("span",null,this.props.user),r.a.createElement("span",null,new Date(this.props.lastUpdated).toDateString())),r.a.createElement("button",{className:"button is-success",onClick:function(){return e.play()}},"Play"),"\xa0",r.a.createElement("button",{className:"button is-info",onClick:function(){return e.edit()}},"Edit"))))))}}]),n}(r.a.Component),he=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={lists:[]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.getLists()}},{key:"getLists",value:function(){var e=this;fetch("".concat(g,"playlist?user=","oof")).then((function(e){return e.json()})).then((function(t){return e.setState({lists:t})})).catch(console.error)}},{key:"back",value:function(){window.location.replace("/playlist")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"MyLists"},r.a.createElement("button",{className:"button backButton",onClick:function(){return e.back()}},r.a.createElement(D.a,{icon:L.a})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return e.getLists()}},"oof"),r.a.createElement(de,{lists:this.state.lists}))}}]),n}(r.a.Component),ve=(n(441),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={loading:!0,lists:void 0,page:1},a}return Object(c.a)(n,[{key:"fetchLists",value:function(){var e=this;fetch("".concat(g,"playlist/all")).then((function(e){return e.json()})).then((function(t){return e.setState({loading:!1,lists:t})}))}},{key:"back",value:function(){window.location.replace("/playlist")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"AllLists"},this.state.loading?r.a.createElement("div",{className:"loading"},this.fetchLists(),r.a.createElement(te,null)):r.a.createElement("div",{className:"loaded"},r.a.createElement("button",{className:"button backButton",onClick:function(){return e.back()}},r.a.createElement(D.a,{icon:L.a})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("h1",null,"All Playlists")),r.a.createElement("br",null),r.a.createElement("div",{className:"listGrid"},r.a.createElement(de,{loading:this.state.loading,lists:this.state.lists}))))}}]),n}(r.a.Component)),fe=n(139),ye=(n(442),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={wantEvents:!1,songsBetweenEvents:20,listOfPeople:[],eventTypes:[]},a.toPlayer=a.toPlayer.bind(Object(f.a)(a)),a.handleEventChange=a.handleEventChange.bind(Object(f.a)(a)),a.handleNumberOfSongsChange=a.handleNumberOfSongsChange.bind(Object(f.a)(a)),a.parseList=a.parseList.bind(Object(f.a)(a)),a.handleEventTypeChange=a.handleEventTypeChange.bind(Object(f.a)(a)),a}return Object(c.a)(n,[{key:"toPlayer",value:function(){if(!localStorage.getItem("spotifyAccess"))return alert("You are not logged into spotify! Sending you back to home to login"),window.location.replace("/");if(0===this.state.listOfPeople.length)return this.setState({listOfPeople:["List","Of","People","Undefined","Good","Job"]});if(0===this.state.eventTypes.length)return this.setState({eventTypes:["adtrad"]});var e=new URLSearchParams({p:S("p"),events:this.state.wantEvents,listOfPeople:this.state.listOfPeople,songsBetweenEvents:this.state.songsBetweenEvents,eventTypes:this.state.eventTypes});window.location.replace("/player?"+e.toString())}},{key:"handleEventChange",value:function(e){this.setState({wantEvents:e.target.checked})}},{key:"handleNumberOfSongsChange",value:function(e){this.setState({songsBetweenEvents:e.target.value})}},{key:"handleEventTypeChange",value:function(e){this.setState({eventTypes:Object(fe.a)(e.target.selectedOptions).map((function(e){return e.value}))})}},{key:"parseList",value:function(e){var t=e.target.value.split(",");this.setState({listOfPeople:t})}},{key:"TableOfPeople",value:function(){return this.state.listOfPeople?r.a.createElement("div",{className:"TableOfPeople"},r.a.createElement("table",null,r.a.createElement("tbody",null,this.state.listOfPeople.map((function(e){return r.a.createElement("tr",{key:Math.random()},e)}))))):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"PlayPlaylist"},r.a.createElement("h1",null,"Play options"),"Events?:",r.a.createElement("input",{type:"checkbox",id:"wantEvents",onChange:this.handleEventChange}),this.state.wantEvents?r.a.createElement("div",{className:"wantEvents"},"Number of songs between events:",r.a.createElement("input",{type:"number",defaultValue:20,onChange:this.handleNumberOfSongsChange}),"Which events do you want?",r.a.createElement("select",{name:"typeOfEvents",onChange:this.handleEventTypeChange,multiple:!0},r.a.createElement("option",{value:"adtrad"},"Adtrad"),r.a.createElement("option",{value:"Escalatie"},"Escalatie"),r.a.createElement("option",{value:"water"},"Water"),r.a.createElement("option",{value:"shots"},"Shots!")),r.a.createElement("br",null),"List of people participating in the events (comma-seperated):",r.a.createElement("br",null),r.a.createElement("textarea",{id:"listOfPeople",onChange:this.parseList}),this.TableOfPeople()):null,r.a.createElement("button",{className:"button",onClick:this.toPlayer},"Play!"))}}]),n}(r.a.Component)),be=(n(443),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},r.a.createElement("div",{className:"bold",id:"title"},r.a.createElement("h1",null,"Music player")),r.a.createElement(m.b,{className:"Link",id:"playlistButton",to:"/playlist"},r.a.createElement("button",{className:"button is-info"},"Play/edit a playlist")),r.a.createElement(m.b,{className:"Link",id:"controllerButton",to:"/controller"},r.a.createElement("button",{className:"button is-info"},"Remote control")),r.a.createElement(q,{className:"Link"}),r.a.createElement("footer",null))}}]),n}(r.a.Component)),ge=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),a=t.call(this,e),window.playerEvents=new _.EventEmitter,window.state={playing:!1,player:void 0,volume:1},a}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/testComponent"}," ",r.a.createElement(z,null)," "),r.a.createElement(d.a,{path:"/loading"}," ",r.a.createElement(te,null)," "),r.a.createElement(d.a,{path:"/player"}," ",r.a.createElement(V,null)," "),r.a.createElement(d.a,{path:"/controller"}," ",r.a.createElement(Z,null)," "),r.a.createElement(d.a,{path:"/playlist/new"}," ",r.a.createElement(H,null)," "),r.a.createElement(d.a,{path:"/playlist/edit/spotify"}," ",r.a.createElement(ce,null)," "),r.a.createElement(d.a,{path:"/playlist/edit/youtube"}," ",r.a.createElement(se,null)," "),r.a.createElement(d.a,{path:"/playlist/edit/mp3"}," ",r.a.createElement(me,null)," "),r.a.createElement(d.a,{path:"/playlist/edit"}," ",r.a.createElement(ne,null)," "),r.a.createElement(d.a,{path:"/playlist/me"}," ",r.a.createElement(he,null)," "),r.a.createElement(d.a,{path:"/playlist/all"}," ",r.a.createElement(ve,null)," "),r.a.createElement(d.a,{path:"/playlist/play"}," ",r.a.createElement(ye,null)," "),r.a.createElement(d.a,{path:"/playlist"}," ",r.a.createElement(G,null)," "),r.a.createElement(d.a,{path:"/"}," ",r.a.createElement(be,null)," "))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[140,1,2]]]);
//# sourceMappingURL=main.f048f0f7.chunk.js.map